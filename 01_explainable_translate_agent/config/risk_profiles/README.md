# ë¦¬ìŠ¤í¬ í”„ë¡œíŒŒì¼ (Risk Profiles)

êµ­ê°€ë³„ ê·œì œ ë° ì»´í”Œë¼ì´ì–¸ìŠ¤ ê·œì¹™ì„ ì •ì˜í•˜ì—¬ ë²ˆì—­ í’ˆì§ˆì„ ê´€ë¦¬í•©ë‹ˆë‹¤.

## ì™œ Risk Profileì¸ê°€?

| ë¬¸ì œ | ì˜í–¥ |
|------|------|
| **êµ­ê°€ë³„ ê·œì œ ì°¨ì´** | ë¯¸êµ­ FTC vs EU GDPR vs ì¤‘êµ­ PIPL - ë™ì¼ ë²ˆì—­ì´ í•œ êµ­ê°€ì—ì„œëŠ” í•©ë²•, ë‹¤ë¥¸ êµ­ê°€ì—ì„œëŠ” ìœ„ë²• |
| **ê¸ˆì¹™ì–´ ê´€ë¦¬ ì–´ë ¤ì›€** | "guaranteed", "100% safe" ë“± ë§ˆì¼€íŒ… ë¬¸êµ¬ê°€ ë²•ì  ë¬¸ì œ ì•¼ê¸° |
| **ë©´ì±…ì¡°í•­ ëˆ„ë½** | ë°ì´í„° ë°±ì—…, ê²°ì œ ê´€ë ¨ í•„ìˆ˜ ê³ ì§€ ëˆ„ë½ ì‹œ ë²•ì  ìœ„í—˜ |
| **ì¼ê´€ì„± ì—†ëŠ” ê²€í† ** | ê²€ìˆ˜ìë§ˆë‹¤ ë‹¤ë¥¸ ê·œì œ ì§€ì‹ â†’ í’ˆì§ˆ í¸ì°¨ |

**Risk Profile í•´ê²°ì±…:**

| íŠ¹ì„± | íš¨ê³¼ |
|------|------|
| **YAMLë¡œ ê·œì¹™ ì™¸ë¶€í™”** | ì½”ë“œ ìˆ˜ì • ì—†ì´ ê·œì œ ì—…ë°ì´íŠ¸ |
| **êµ­ê°€ë³„ í”„ë¡œíŒŒì¼ ë¶„ë¦¬** | US, EU, CN ë“± ê° ì‹œì¥ì— ë§ëŠ” ê·œì¹™ ì ìš© |
| **ì‹¬ê°ë„ ìˆ˜ì¤€ ì •ì˜** | low â†’ criticalê¹Œì§€ ìë™ ì ìˆ˜ ì¡°ì • |
| **Compliance Agent ì—°ë™** | ê·œì¹™ ê¸°ë°˜ ìë™ ê²€ì‚¬ + ìˆ˜ì • ì œì•ˆ |

---

## ì•„í‚¤í…ì²˜ì—ì„œì˜ ìœ„ì¹˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              ë²ˆì—­ íŒŒì´í”„ë¼ì¸                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                         â”‚
â”‚  â”‚  RISK PROFILE   â”‚                                                         â”‚
â”‚  â”‚   (US.yaml)     â”‚                                                         â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                                                         â”‚
â”‚  â”‚ â€¢ ê¸ˆì¹™ì–´        â”‚                                                         â”‚
â”‚  â”‚ â€¢ ë©´ì±…ì¡°í•­      â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                   â”‚
â”‚  â”‚ â€¢ ê°œì¸ì •ë³´ ê·œì¹™ â”‚                      â”‚                                   â”‚
â”‚  â”‚ â€¢ í†¤/ê²©ì‹       â”‚                      â”‚                                   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â–¼                                   â”‚
â”‚                               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”‚
â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚  EVALUATE (3 ë³‘ë ¬)  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚                    â”‚          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚              â”‚
â”‚                    â–¼                    â–¼                      â–¼              â”‚
â”‚             â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚             â”‚ Accuracy  â”‚        â”‚Compliance â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚  Quality  â”‚        â”‚
â”‚             â”‚ Evaluator â”‚        â”‚ Evaluator â”‚ Risk     â”‚ Evaluator â”‚        â”‚
â”‚             â”‚           â”‚        â”‚           â”‚ Profile  â”‚           â”‚        â”‚
â”‚             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ ì ìš©     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## íŒŒì¼ êµ¬ì¡°

```
config/risk_profiles/
â”œâ”€â”€ README.md          # ì´ ë¬¸ì„œ
â”œâ”€â”€ DEFAULT.yaml       # ê¸°ë³¸ í”„ë¡œíŒŒì¼ (ê¸€ë¡œë²Œ)
â””â”€â”€ US.yaml            # ë¯¸êµ­ ì‹œì¥ í”„ë¡œíŒŒì¼
```

---

## ë™ì‘ ë°©ì‹

```
US ì‹œì¥ìš© ë²ˆì—­
        â†“
Compliance Agentê°€ US.yaml ë¡œë“œ
        â†“
ê²€ì‚¬: ê¸ˆì¹™ì–´, í•„ìˆ˜ ë©´ì±…ì¡°í•­, ê°œì¸ì •ë³´ ê·œì¹™
        â†“
ë°˜í™˜: ì ìˆ˜ (0-5), ë°œê²¬ëœ ë¬¸ì œ, ìˆ˜ì • ì œì•ˆ
```

### ê²€ì‚¬ ì˜ˆì‹œ

| ë²ˆì—­ | ìœ„ë°˜ | ì‹¬ê°ë„ | ì ìˆ˜ ì˜í–¥ |
|------|------|--------|-----------|
| "This is **guaranteed** to work" | ì ˆëŒ€ì  ë³´ì¦ ì£¼ì¥ (FTC) | high | -2 |
| "**100% safe** for your data" | ì•ˆì „ì„± ì ˆëŒ€ ì£¼ì¥ (FDA) | critical | ì°¨ë‹¨ |
| "Back up your data" (ë©´ì±…ì¡°í•­ ì—†ìŒ) | ë©´ì±…ì¡°í•­ ëˆ„ë½ | medium | -1 |

## ìŠ¤í‚¤ë§ˆ ë ˆí¼ëŸ°ìŠ¤

```yaml
# í”„ë¡œíŒŒì¼ ë©”íƒ€ë°ì´í„°
profile:
  country_code: US                    # ISO êµ­ê°€ ì½”ë“œ
  country_name: United States         # í‘œì‹œ ì´ë¦„
  region: North America               # ì§€ì—­
  regulatory_strictness: high         # low | medium | high

# ë²ˆì—­ì— í¬í•¨ë˜ë©´ ì•ˆ ë˜ëŠ” ìš©ì–´
prohibited_terms:
  - pattern: "guaranteed"             # ë§¤ì¹­í•  í…ìŠ¤íŠ¸ íŒ¨í„´
    context: "absolute claims"        # ê¸ˆì§€ ì´ìœ 
    severity: high                    # low | medium | high | critical
    suggestion: "ì™„í™”ëœ í‘œí˜„ ì‚¬ìš©"      # ìˆ˜ì • ë°©ë²•

# íŠ¹ì • ë¬¸êµ¬ê°€ ìˆì„ ë•Œ ë°˜ë“œì‹œ ì¶”ê°€í•´ì•¼ í•˜ëŠ” ë©´ì±…ì¡°í•­
required_disclaimers:
  data_backup:                        # ë©´ì±…ì¡°í•­ ì¹´í…Œê³ ë¦¬
    trigger_phrases:                  # íŠ¸ë¦¬ê±° ë¬¸êµ¬ ëª©ë¡
      - "backup"
      - "restore"
    disclaimer: "ë°ì´í„° ë°±ì—…ì— ëª¨ë“  ì½˜í…ì¸ ê°€ í¬í•¨ë˜ì§€ ì•Šì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤."
    placement: "near_content"         # near_content | before_action | footer

# ê°œì¸ì •ë³´ ë³´í˜¸ ê·œì¹™
privacy:
  pii_categories:
    - name: "personal_data"
      handling: "must_disclose_collection"  # ì²˜ë¦¬ ìš”êµ¬ì‚¬í•­
  consent_requirements:
    - type: "data_collection"
      timing: "before_collection"

# ì—°ë ¹ ì œí•œ (ì˜ˆ: COPPA)
age_restrictions:
  coppa:
    applies_to_under: 13
    requirements:
      - "parental_consent_required"

# ì ‘ê·¼ì„± ìš”êµ¬ì‚¬í•­ (ì˜ˆ: ADA)
accessibility:
  requirements:
    - "alt_text_for_images"
    - "screen_reader_compatible"

# í†¤ê³¼ ê²©ì‹ ê°€ì´ë“œë¼ì¸
tone:
  formality_level: medium             # low | medium | high
  avoid:
    - "overly casual language"
  prefer:
    - "clear and direct"
```

## ìƒˆ í”„ë¡œíŒŒì¼ ì¶”ê°€ ë°©ë²•

1. ê¸°ì¡´ í”„ë¡œíŒŒì¼ì„ í…œí”Œë¦¿ìœ¼ë¡œ ë³µì‚¬:
   ```bash
   cp US.yaml NEW_COUNTRY.yaml
   ```

2. `profile` ì„¹ì…˜ì— ì˜¬ë°”ë¥¸ êµ­ê°€ ì •ë³´ ì…ë ¥

3. êµ­ê°€ë³„ ê·œì œ ì¡°ì‚¬ í›„ ì¶”ê°€:
   - ê¸ˆì¹™ì–´ (ê´‘ê³ ë²•, ê±´ê°• ê´€ë ¨ ì£¼ì¥ ë“±)
   - í•„ìˆ˜ ë©´ì±…ì¡°í•­ (ì†Œë¹„ì ë³´í˜¸ë²•)
   - ê°œì¸ì •ë³´ ê·œì¹™ (EUëŠ” GDPR, ì¤‘êµ­ì€ PIPL ë“±)
   - ì—°ë ¹ ì œí•œ
   - ì ‘ê·¼ì„± ìš”êµ¬ì‚¬í•­
   - í†¤ ì„ í˜¸ë„

4. Compliance Evaluator ì—ì´ì „íŠ¸ë¡œ í…ŒìŠ¤íŠ¸

## ì‚¬ìš© ê°€ëŠ¥í•œ í”„ë¡œíŒŒì¼

| í”„ë¡œíŒŒì¼ | êµ­ê°€ | ì§€ì—­ | ì—„ê²©ë„ | ì£¼ìš” ê·œì œ |
|----------|------|------|--------|-----------|
| `US.yaml` | ë¯¸êµ­ | ë¶ë¯¸ | High | FTC, FDA, CCPA, COPPA, ADA |
| `DEFAULT.yaml` | (ê¸°ë³¸ê°’) | ê¸€ë¡œë²Œ | Medium | ê¸°ë³¸ ì½˜í…ì¸  ì•ˆì „ ê·œì¹™ |

### US.yaml ìš”ì•½

| ì¹´í…Œê³ ë¦¬ | ê·œì¹™ ìˆ˜ | ì£¼ìš” ë‚´ìš© |
|----------|---------|-----------|
| **prohibited_terms** | 9ê°œ | guaranteed, 100% safe, cures, risk-free ë“± |
| **required_disclaimers** | 4ê°œ | data_backup, cloud_storage, account_deletion, payment |
| **privacy** | 3ê°œ | personal_data, location_data, biometric_data |
| **age_restrictions** | 1ê°œ | COPPA (13ì„¸ ë¯¸ë§Œ) |
| **accessibility** | 3ê°œ | alt_text, screen_reader, color_contrast |
| **tone** | medium | clear and direct, professional |

## ì‹¬ê°ë„ ìˆ˜ì¤€

| ìˆ˜ì¤€ | ì ìˆ˜ ì˜í–¥ | ì¡°ì¹˜ |
|------|-----------|------|
| `low` | -0.5 | ê²½ê³ ë§Œ í‘œì‹œ |
| `medium` | -1 | ìˆ˜ì • ê¶Œì¥ |
| `high` | -2 | ë°˜ë“œì‹œ ìˆ˜ì • |
| `critical` | ì°¨ë‹¨ (ì ìˆ˜ â‰¤2) | ë°œí–‰ ë¶ˆê°€ |

## ì½”ë“œì—ì„œ ì‚¬ìš©ë²•

```python
from src.utils import get_risk_profile

# íƒ€ê²Ÿ ì‹œì¥ì˜ í”„ë¡œíŒŒì¼ ë¡œë“œ
profile = get_risk_profile("US")

# ê¸ˆì¹™ì–´ ì ‘ê·¼
for term in profile["prohibited_terms"]:
    if term["pattern"] in translation:
        # ì‹¬ê°ë„ì— ë”°ë¼ ë¬¸ì œ í”Œë˜ê·¸
        ...
```

---

## Compliance Agent ì¶œë ¥ ì˜ˆì‹œ

Risk Profile ìœ„ë°˜ ì‹œ Compliance Agentê°€ ë°˜í™˜í•˜ëŠ” ê²°ê³¼:

```json
{
  "agent_name": "compliance",
  "reasoning_chain": [
    "Step 1: ê¸ˆì¹™ì–´ ê²€ì‚¬ - 'guaranteed' ë°œê²¬ (FTC ìœ„ë°˜)",
    "Step 2: ë©´ì±…ì¡°í•­ ê²€ì‚¬ - 'backup' ì–¸ê¸‰ ì‹œ ë©´ì±…ì¡°í•­ í•„ìš”í•˜ë‚˜ ëˆ„ë½",
    "Step 3: ê°œì¸ì •ë³´ ê·œì¹™ ê²€ì‚¬ - í†µê³¼",
    "Step 4: ìµœì¢… íŒë‹¨ - 2ê°œ ìœ„ë°˜ ë°œê²¬, ì ìˆ˜ 3ì "
  ],
  "score": 3,
  "verdict": "regenerate",
  "issues": [
    "ê¸ˆì¹™ì–´ 'guaranteed' ì‚¬ìš© (severity: high)",
    "ë°ì´í„° ë°±ì—… ë©´ì±…ì¡°í•­ ëˆ„ë½ (severity: medium)"
  ],
  "corrections": [
    {
      "original": "This is guaranteed to work",
      "suggested": "This is designed to work reliably",
      "reason": "FTC ê·œì •ìƒ ì ˆëŒ€ì  ë³´ì¦ ì£¼ì¥ ê¸ˆì§€"
    },
    {
      "original": "Back up your data",
      "suggested": "Back up your data. Note: Backup may not include all content.",
      "reason": "US.yaml required_disclaimers.data_backup"
    }
  ],
  "risk_flags": [
    {"type": "prohibited_term", "term": "guaranteed", "severity": "high"},
    {"type": "missing_disclaimer", "category": "data_backup", "severity": "medium"}
  ]
}
```

---

## í–¥í›„ í™•ì¥ ê³„íš

| í”„ë¡œíŒŒì¼ | êµ­ê°€ | ì£¼ìš” ê·œì œ | ìƒíƒœ |
|----------|------|-----------|------|
| `EU.yaml` | ìœ ëŸ½ì—°í•© | GDPR, DSA, AI Act | ğŸ”® ê³„íš |
| `CN.yaml` | ì¤‘êµ­ | PIPL, CSL | ğŸ”® ê³„íš |
| `JP.yaml` | ì¼ë³¸ | APPI, JIS | ğŸ”® ê³„íš |
| `KR.yaml` | í•œêµ­ | PIPA, ì •ë³´í†µì‹ ë§ë²• | ğŸ”® ê³„íš |

---

## ê´€ë ¨ íŒŒì¼

| íŒŒì¼ | ì—­í•  |
|------|------|
| `src/tools/compliance_evaluator_tool.py` | Risk Profileì„ ì‚¬ìš©í•˜ëŠ” Compliance ì—ì´ì „íŠ¸ |
| `src/prompts/compliance_evaluator.md` | Compliance ì—ì´ì „íŠ¸ í”„ë¡¬í”„íŠ¸ ({{ risk_profile }} ë³€ìˆ˜) |
| `src/models/agent_result.py` | `risk_flags` í•„ë“œ ì •ì˜ |
| `config/settings.yaml` | ê¸°ë³¸ Risk Profile ì„¤ì • |
