# í”„ë¡¬í”„íŠ¸ (Prompts)

ë²ˆì—­ ë° í‰ê°€ ì—ì´ì „íŠ¸ìš© í”„ë¡¬í”„íŠ¸ í…œí”Œë¦¿ì„ ê´€ë¦¬í•©ë‹ˆë‹¤.

## ì™œ í”„ë¡¬í”„íŠ¸ë¥¼ ë¶„ë¦¬í–ˆë‚˜?

| ë¬¸ì œ | í•´ê²°ì±… |
|------|--------|
| **ì½”ë“œì— í”„ë¡¬í”„íŠ¸ í•˜ë“œì½”ë”©** | ìˆ˜ì • ì‹œ ì½”ë“œ ë°°í¬ í•„ìš” â†’ Markdown íŒŒì¼ë¡œ ë¶„ë¦¬ |
| **ë³€ìˆ˜ ì£¼ì… ì–´ë ¤ì›€** | `{{ glossary }}` í…œí”Œë¦¿ ë³€ìˆ˜ë¡œ ë™ì  ë°ì´í„° ì£¼ì… |
| **ìºì‹± ë¶ˆê°€** | ì •ì  System Prompt ìºì‹± â†’ 90% ë¹„ìš© ì ˆê° |
| **ì¬ì‚¬ìš© ì–´ë ¤ì›€** | í…œí”Œë¦¿ ë¡œë”ë¡œ ì¼ê´€ëœ ì¸í„°í˜ì´ìŠ¤ ì œê³µ |

### í”„ë¡¬í”„íŠ¸ ìºì‹± ì „ëµ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Bedrock Prompt Caching                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚   System Prompt (*.md)              User Message                 â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚   â”‚ â€¢ ì—­í•  ì •ì˜         â”‚            â”‚ â€¢ {{ source_text }}â”‚      â”‚
â”‚   â”‚ â€¢ í‰ê°€ ê¸°ì¤€         â”‚  â—€â”€ ìºì‹±   â”‚ â€¢ {{ glossary }}   â”‚      â”‚
â”‚   â”‚ â€¢ ì¶œë ¥ í˜•ì‹         â”‚  (90% ì ˆê°) â”‚ â€¢ {{ translation }}â”‚      â”‚
â”‚   â”‚ â€¢ Few-shot ì˜ˆì‹œ    â”‚            â”‚                    â”‚      â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚         ì •ì  (ë³€ê²½ ë“œë¬¾)                  ë™ì  (ë§¤ ìš”ì²­)           â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Skillsì™€ì˜ ê´€ê³„ (ğŸ”® í–¥í›„ ê¸°ëŠ¥)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Skills vs Prompts ê´€ê³„                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚   skills/                              src/prompts/                         â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚   â”‚   SKILL.md         â”‚               â”‚   *.md             â”‚               â”‚
â”‚   â”‚                    â”‚               â”‚                    â”‚               â”‚
â”‚   â”‚  ğŸ“š ì™„ì „í•œ ì§€ì‹ íŒ¨í‚¤ì§€â”‚    ì¶”ì¶œ/ì••ì¶•   â”‚  ğŸ“‹ ëŸ°íƒ€ì„ í”„ë¡¬í”„íŠ¸   â”‚               â”‚
â”‚   â”‚  (Training Manual) â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚  (Quick Reference) â”‚               â”‚
â”‚   â”‚                    â”‚               â”‚                    â”‚               â”‚
â”‚   â”‚  â€¢ ìƒì„¸ ê°€ì´ë“œë¼ì¸   â”‚               â”‚  â€¢ ê°„ê²°í•œ ì§€ì‹œì‚¬í•­   â”‚               â”‚
â”‚   â”‚  â€¢ Few-shot ì˜ˆì‹œ   â”‚               â”‚  â€¢ {{ í…œí”Œë¦¿ ë³€ìˆ˜ }} â”‚               â”‚
â”‚   â”‚  â€¢ ì°¸ì¡° ë¬¸ì„œ ë§í¬   â”‚               â”‚  â€¢ ì¦‰ì‹œ ì‹¤í–‰ ê°€ëŠ¥   â”‚               â”‚
â”‚   â”‚  â€¢ ë°°ê²½ ì§€ì‹       â”‚               â”‚                    â”‚               â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚                                                                              â”‚
â”‚         ì„¤ê³„/ë¬¸ì„œí™”/í•™ìŠµìš©                      ì—ì´ì „íŠ¸ ì‹¤í–‰ìš©                 â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ë¹„êµí‘œ

| êµ¬ë¶„ | `skills/*/SKILL.md` | `src/prompts/*.md` |
|------|---------------------|---------------------|
| **ëª©ì ** | ì™„ì „í•œ ì§€ì‹/ëŠ¥ë ¥ ì •ì˜ | ëŸ°íƒ€ì„ ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ |
| **í¬ê¸°** | ìƒì„¸í•¨ (200-400ì¤„) | ê°„ê²°í•¨ (50-100ì¤„) |
| **ë³€ìˆ˜** | ì—†ìŒ (ì •ì  ë¬¸ì„œ) | `{{ source_text }}` ë“± |
| **Few-shot** | ì ìˆ˜ë³„ ìƒì„¸ ì˜ˆì‹œ í¬í•¨ | ìµœì†Œí™” ë˜ëŠ” ìƒëµ |
| **ì°¸ì¡° ë¬¸ì„œ** | `references/` í´ë” ë§í¬ | í¬í•¨í•˜ì§€ ì•ŠìŒ |
| **ì‚¬ìš© ì‹œì ** | ì„¤ê³„/ë¬¸ì„œí™”/í•™ìŠµ | ì—ì´ì „íŠ¸ ì‹¤í–‰ ì‹œ ë¡œë“œ |
| **ë¹„ìœ ** | ğŸ“š ì „ë¬¸ê°€ ì–‘ì„± êµê³¼ì„œ | ğŸ“‹ í˜„ì¥ ì‘ì—… ì§€ì‹œì„œ |

### ì™œ ë¶„ë¦¬í•  ì˜ˆì •ì¸ê°€?

| ì´ìœ  | ì„¤ëª… |
|------|------|
| **í† í° íš¨ìœ¨ì„±** | Skillsì˜ ëª¨ë“  ë‚´ìš©ì„ í”„ë¡¬í”„íŠ¸ì— ë„£ìœ¼ë©´ í† í° ë‚­ë¹„ |
| **ë³€ìˆ˜ ì£¼ì…** | ëŸ°íƒ€ì„ì— `{{ glossary }}`, `{{ source_text }}` ë“± ë™ì  ë°ì´í„° ì£¼ì… í•„ìš” |
| **ê´€ì‹¬ì‚¬ ë¶„ë¦¬** | ë¬¸ì„œí™”(Skills) vs ì‹¤í–‰(Prompts) ë¶„ë¦¬ |
| **ìœ ì§€ë³´ìˆ˜** | Skills ìˆ˜ì • ì‹œ Promptsë„ ê°™ì´ ì—…ë°ì´íŠ¸í•  í•„ìš” ì—†ìŒ |

> **í˜„ì¬ ìƒíƒœ**: SkillsëŠ” í–¥í›„ ê¸°ëŠ¥ìœ¼ë¡œ ê³„íšë˜ì–´ ìˆìœ¼ë©°, í˜„ì¬ëŠ” í”„ë¡¬í”„íŠ¸ì— ì§ì ‘ í¬í•¨ë˜ì–´ ìˆìŠµë‹ˆë‹¤.

### ì‚¬ìš© ì˜ˆì‹œ

```python
from src.prompts import PromptTemplateLoader, load_prompt

loader = PromptTemplateLoader()

# ë°©ë²• 1: ëŸ°íƒ€ì„ í”„ë¡¬í”„íŠ¸ ë¡œë“œ (ë³€ìˆ˜ ì¹˜í™˜) â† ì—ì´ì „íŠ¸ ì‹¤í–‰ìš©
prompt = load_prompt("translator",
    source_lang="ko",
    target_lang="en-rUS",
    source_text="ABC í´ë¼ìš°ë“œëŠ” ì„œë¹„ìŠ¤ì…ë‹ˆë‹¤.",
    glossary="ABC í´ë¼ìš°ë“œ: ABC Cloud"
)

# ë°©ë²• 2: ìŠ¤í‚¬ ì „ì²´ ë¡œë“œ (ë¬¸ì„œ ì°¸ì¡°ìš©) â† ìƒì„¸ ê°€ì´ë“œ í•„ìš” ì‹œ
skill = loader.load_skill("translator")
locale_guide = skill.get_section("Locale-Specific Guidelines")
```

---

## ê°œìš”

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      template.py                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  PromptTemplate              PromptTemplateLoader           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚  â”‚ - content       â”‚         â”‚ - load()        â”‚            â”‚
â”‚  â”‚ - metadata      â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”‚ - load_skill()  â”‚            â”‚
â”‚  â”‚ - render()      â”‚         â”‚ - list_templatesâ”‚            â”‚
â”‚  â”‚ - get_section() â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚                     â”‚
â”‚           â”‚                           â”‚                     â”‚
â”‚           â–¼                           â–¼                     â”‚
â”‚     Strands Agent            *.md í”„ë¡¬í”„íŠ¸ íŒŒì¼              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## íŒŒì¼ êµ¬ì¡°

```
src/prompts/
â”œâ”€â”€ __init__.py              # ëª¨ë“ˆ ìµìŠ¤í¬íŠ¸
â”œâ”€â”€ template.py              # í…œí”Œë¦¿ ë¡œë” (PromptTemplate, PromptTemplateLoader)
â”œâ”€â”€ README.md                # ì´ ë¬¸ì„œ
â”œâ”€â”€ translator.md            # ë²ˆì—­ ì—ì´ì „íŠ¸ í”„ë¡¬í”„íŠ¸
â”œâ”€â”€ backtranslator.md        # ì—­ë²ˆì—­ ì—ì´ì „íŠ¸ í”„ë¡¬í”„íŠ¸
â”œâ”€â”€ accuracy_evaluator.md    # ì •í™•ì„± í‰ê°€ ì—ì´ì „íŠ¸ í”„ë¡¬í”„íŠ¸
â”œâ”€â”€ compliance_evaluator.md  # ì»´í”Œë¼ì´ì–¸ìŠ¤ í‰ê°€ ì—ì´ì „íŠ¸ í”„ë¡¬í”„íŠ¸
â””â”€â”€ quality_evaluator.md     # í’ˆì§ˆ í‰ê°€ ì—ì´ì „íŠ¸ í”„ë¡¬í”„íŠ¸
```

---

## í•µì‹¬ í…œí”Œë¦¿ ë³€ìˆ˜

í”„ë¡¬í”„íŠ¸ì— ì£¼ì…ë˜ëŠ” í•µì‹¬ ë°ì´í„°:

| ë³€ìˆ˜ | ì¶œì²˜ | ì‚¬ìš© ì—ì´ì „íŠ¸ | ì—­í•  |
|------|------|--------------|------|
| `{{ glossary }}` | `data/glossaries/` | Translator, Accuracy, Quality | ìš©ì–´ ì¼ê´€ì„± ê°•ì œ |
| `{{ risk_profile }}` | `data/risk_profiles/` | Compliance | êµ­ê°€ë³„ ê·œì œ ê·œì¹™ ì ìš© |
| `{{ backtranslation }}` | Backtranslator ì¶œë ¥ | Accuracy | ì˜ë¯¸ ë³´ì¡´ ê²€ì¦ |
| `{{ feedback }}` | RegenerationSOP ì¶œë ¥ | Translator (ì¬ìƒì„± ì‹œ) | ì´ì „ í‰ê°€ í”¼ë“œë°± |

### Glossary-Aware Quality

Quality ì—ì´ì „íŠ¸ì— Glossaryë¥¼ ì „ë‹¬í•˜ì—¬ **ì—ì´ì „íŠ¸ ê°„ ì¶©ëŒì„ ë°©ì§€**í•©ë‹ˆë‹¤:

```markdown
<!-- quality_evaluator.md ë‚´ë¶€ -->
## ìš©ì–´ì§‘ ì œì•½

ë‹¤ìŒ ìš©ì–´ì§‘ ìš©ì–´ëŠ” ê°ì  ëŒ€ìƒì—ì„œ ì œì™¸í•©ë‹ˆë‹¤:
{{ glossary }}

ì´ ìš©ì–´ë“¤ì€ ë¸Œëœë“œ ì¼ê´€ì„±ì„ ìœ„í•´ ì§€ì •ëœ ë²ˆì—­ì„ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤.
ì–´ìƒ‰í•˜ê²Œ ëŠê»´ì§€ë”ë¼ë„ ìš©ì–´ì§‘ì— ìˆìœ¼ë©´ ê°ì í•˜ì§€ ë§ˆì„¸ìš”.
```

---

## í”„ë¡¬í”„íŠ¸ ëª©ë¡

### 1. translator.md (ë²ˆì—­)

| ì†ì„± | ê°’ |
|------|-----|
| **ëª¨ë¸** | Claude Opus 4.5 |
| **ì—­í• ** | í•œêµ­ì–´ â†’ ëŒ€ìƒ ì–¸ì–´ ë²ˆì—­ |
| **Skills ì°¸ì¡°** | `skills/translator/SKILL.md` |

**í…œí”Œë¦¿ ë³€ìˆ˜:**

| ë³€ìˆ˜ | íƒ€ì… | ì„¤ëª… |
|------|------|------|
| `{{ source_lang }}` | string | ì›ë³¸ ì–¸ì–´ (ì˜ˆ: "ko") |
| `{{ target_lang }}` | string | ëŒ€ìƒ ì–¸ì–´ (ì˜ˆ: "en-rUS") |
| `{{ source_text }}` | string | ë²ˆì—­í•  ì›ë¬¸ |
| `{{ glossary }}` | string/JSON | ìš©ì–´ì§‘ ë§¤í•‘ |

**ì¶œë ¥ í˜•ì‹:**
```json
{
  "translation": "ë²ˆì—­ ê²°ê³¼",
  "glossary_applied": [{"source": "ì›ë¬¸", "target": "ë²ˆì—­"}],
  "notes": "ë²ˆì—­ ê²°ì • ì‚¬í•­"
}
```

---

### 2. backtranslator.md (ì—­ë²ˆì—­)

| ì†ì„± | ê°’ |
|------|-----|
| **ëª¨ë¸** | Claude Opus 4.5 |
| **ì—­í• ** | ë²ˆì—­ë¬¸ â†’ ì›ë³¸ ì–¸ì–´ë¡œ ì—­ë²ˆì—­ (ê²€ì¦ìš©) |
| **Skills ì°¸ì¡°** | ì—†ìŒ (ë‹¨ìˆœ ì—­ë²ˆì—­) |

**í…œí”Œë¦¿ ë³€ìˆ˜:**

| ë³€ìˆ˜ | íƒ€ì… | ì„¤ëª… |
|------|------|------|
| `{{ source_lang }}` | string | ë²ˆì—­ë¬¸ ì–¸ì–´ (ì˜ˆ: "en-rUS") |
| `{{ target_lang }}` | string | ì—­ë²ˆì—­ ëŒ€ìƒ ì–¸ì–´ (ì˜ˆ: "ko") |
| `{{ source_text }}` | string | ì—­ë²ˆì—­í•  ë²ˆì—­ë¬¸ |

**ì¶œë ¥ í˜•ì‹:**
```json
{
  "backtranslation": "ì—­ë²ˆì—­ ê²°ê³¼",
  "notes": "ì˜ë¯¸ ì „ë‹¬ ê´€ì°° (ì„ íƒ)"
}
```

---

### 3. accuracy_evaluator.md (ì •í™•ì„± í‰ê°€)

| ì†ì„± | ê°’ |
|------|-----|
| **ëª¨ë¸** | Claude Opus 4.5 |
| **ì—­í• ** | ì˜ë¯¸ ì •í™•ì„±, ìš©ì–´ ì¤€ìˆ˜, í¬ë§· ë¬´ê²°ì„± í‰ê°€ |
| **Skills ì°¸ì¡°** | `skills/accuracy-evaluator/SKILL.md` |

**í…œí”Œë¦¿ ë³€ìˆ˜:**

| ë³€ìˆ˜ | íƒ€ì… | ì„¤ëª… |
|------|------|------|
| `{{ source_lang }}` | string | ì›ë³¸ ì–¸ì–´ |
| `{{ target_lang }}` | string | ëŒ€ìƒ ì–¸ì–´ |
| `{{ source_text }}` | string | ì›ë¬¸ |
| `{{ translation }}` | string | ë²ˆì—­ë¬¸ |
| `{{ backtranslation }}` | string | ì—­ë²ˆì—­ë¬¸ |
| `{{ glossary }}` | string/JSON | ìš©ì–´ì§‘ |

**ì¶œë ¥ í˜•ì‹:**
```json
{
  "reasoning_chain": ["Step 1: ...", "Step 2: ...", "Step 3: ..."],
  "score": 4,
  "verdict": "pass",
  "issues": ["ì´ìŠˆ ëª©ë¡"],
  "corrections": [{"original": "...", "suggested": "...", "reason": "..."}]
}
```

---

### 4. compliance_evaluator.md (ì»´í”Œë¼ì´ì–¸ìŠ¤ í‰ê°€)

| ì†ì„± | ê°’ |
|------|-----|
| **ëª¨ë¸** | Claude Opus 4.5 |
| **ì—­í• ** | ê¸ˆì¹™ì–´, ë©´ì±…ë¬¸êµ¬, ì½˜í…ì¸  ì•ˆì „, ê·œì œ ì¤€ìˆ˜ í‰ê°€ |
| **Skills ì°¸ì¡°** | `skills/compliance-evaluator/SKILL.md` |

**í…œí”Œë¦¿ ë³€ìˆ˜:**

| ë³€ìˆ˜ | íƒ€ì… | ì„¤ëª… |
|------|------|------|
| `{{ source_lang }}` | string | ì›ë³¸ ì–¸ì–´ |
| `{{ target_lang }}` | string | ëŒ€ìƒ ì–¸ì–´ |
| `{{ source_text }}` | string | ì›ë¬¸ |
| `{{ translation }}` | string | ë²ˆì—­ë¬¸ |
| `{{ content_context }}` | string | ì½˜í…ì¸  ìœ í˜• (data_deletion, subscription ë“±) |
| `{{ risk_profile }}` | string/YAML | êµ­ê°€ë³„ ë¦¬ìŠ¤í¬ í”„ë¡œíŒŒì¼ |

**ì¶œë ¥ í˜•ì‹:**
```json
{
  "reasoning_chain": ["Step 1: ...", "Step 2: ...", "Step 3: ...", "Step 4: ..."],
  "score": 4,
  "verdict": "pass",
  "issues": ["ì»´í”Œë¼ì´ì–¸ìŠ¤ ì´ìŠˆ"],
  "corrections": [...],
  "risk_flags": [{"type": "prohibited_term", "term": "...", "severity": "high"}]
}
```

---

### 5. quality_evaluator.md (í’ˆì§ˆ í‰ê°€)

| ì†ì„± | ê°’ |
|------|-----|
| **ëª¨ë¸** | Claude Opus 4.5 |
| **ì—­í• ** | ìì—°ìŠ¤ëŸ¬ì›€, í†¤/ê²©ì‹, ë¬¸í™”ì  ì í•©ì„±, í›„ë³´ ë¹„êµ |
| **Skills ì°¸ì¡°** | `skills/quality-evaluator/SKILL.md` |

**í…œí”Œë¦¿ ë³€ìˆ˜:**

| ë³€ìˆ˜ | íƒ€ì… | ì„¤ëª… |
|------|------|------|
| `{{ source_lang }}` | string | ì›ë³¸ ì–¸ì–´ |
| `{{ target_lang }}` | string | ëŒ€ìƒ ì–¸ì–´ |
| `{{ source_text }}` | string | ì›ë¬¸ |
| `{{ translation }}` | string | ë²ˆì—­ë¬¸ |
| `{{ candidates }}` | string/JSON | ë²ˆì—­ í›„ë³´ ëª©ë¡ (ì„ íƒ) |
| `{{ content_type }}` | string | ì½˜í…ì¸  ìœ í˜• (FAQ, Legal, UI ë“±) |
| `{{ locale_guidelines }}` | string | ë¡œì¼€ì¼ë³„ í’ˆì§ˆ ê¸°ì¤€ |

**ì¶œë ¥ í˜•ì‹ (ë‹¨ì¼ í›„ë³´):**
```json
{
  "reasoning_chain": ["Step 1: ...", "Step 2: ...", "Step 3: ..."],
  "score": 4,
  "verdict": "pass",
  "issues": ["í’ˆì§ˆ ì´ìŠˆ"],
  "corrections": [{"original": "...", "suggested": "...", "reason": "..."}]
}
```

**ì¶œë ¥ í˜•ì‹ (ë‹¤ì¤‘ í›„ë³´):**
```json
{
  "reasoning_chain": [...],
  "score": 5,
  "verdict": "pass",
  "selected_candidate": 0,
  "candidate_scores": [5, 3],
  "comparison_notes": "í›„ë³´ Aê°€ ë” ìì—°ìŠ¤ëŸ¬ì›€"
}
```

---

## íŒì • ê¸°ì¤€ (Verdict)

ëª¨ë“  í‰ê°€ ì—ì´ì „íŠ¸ëŠ” ë™ì¼í•œ íŒì • ê¸°ì¤€ì„ ì‚¬ìš©í•©ë‹ˆë‹¤:

| ì ìˆ˜ | Verdict | ì„¤ëª… |
|------|---------|------|
| 5ì  | `"pass"` | í†µê³¼ - ë°œí–‰ ê°€ëŠ¥ |
| 3-4ì  | `"regenerate"` | ì¬ìƒì„± í•„ìš” - í”¼ë“œë°± ë°˜ì˜ í›„ ì¬ë²ˆì—­ |
| 0-2ì  | `"fail"` | ì‹¤íŒ¨ - ì¦‰ì‹œ ì°¨ë‹¨ |

> **ì°¸ê³ **: ëª¨ë“  ì—ì´ì „íŠ¸ê°€ 5ì ì„ ë¶€ì—¬í•´ì•¼ ìë™ ë°œí–‰ë©ë‹ˆë‹¤.

## PromptTemplate (í…œí”Œë¦¿ í´ë˜ìŠ¤)

Markdown íŒŒì¼ì—ì„œ í”„ë¡¬í”„íŠ¸ë¥¼ ë¡œë“œí•˜ê³  ë³€ìˆ˜ë¥¼ ì¹˜í™˜í•©ë‹ˆë‹¤.

### ê¸°ë³¸ ì‚¬ìš©ë²•

```python
from src.prompts import PromptTemplate, load_prompt

# ì§ì ‘ í…œí”Œë¦¿ ìƒì„±
template = PromptTemplate("ì•ˆë…•í•˜ì„¸ìš”, {{ name }}ë‹˜!")
rendered = template.render(name="ì‚¬ìš©ì")
print(rendered)  # "ì•ˆë…•í•˜ì„¸ìš”, ì‚¬ìš©ìë‹˜!"

# íŒŒì¼ì—ì„œ ë¡œë“œ (í¸ì˜ í•¨ìˆ˜)
prompt = load_prompt("translator",
    source_text="ABC í´ë¼ìš°ë“œëŠ” ì„œë¹„ìŠ¤ì…ë‹ˆë‹¤.",
    target_lang="en-rUS"
)
```

### YAML Frontmatter ì§€ì›

í”„ë¡¬í”„íŠ¸ íŒŒì¼ì— ë©”íƒ€ë°ì´í„°ë¥¼ í¬í•¨í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

```markdown
---
version: "1.0"
author: "translation-team"
references:
  - style-guide.md
  - glossary.md
---

# ë²ˆì—­ í”„ë¡¬í”„íŠ¸

{{ source_text }}ë¥¼ {{ target_lang }}ë¡œ ë²ˆì—­í•˜ì„¸ìš”.
```

```python
from src.prompts import PromptTemplateLoader

loader = PromptTemplateLoader()
template = loader.load("translator")

# ë©”íƒ€ë°ì´í„° ì ‘ê·¼
print(template.metadata["version"])  # "1.0"
print(template.metadata["references"])  # ["style-guide.md", "glossary.md"]

# ì½˜í…ì¸  (frontmatter ì œì™¸)
print(template.content)
```

### ì„¹ì…˜ ì¶”ì¶œ

Markdown í—¤ë”ë¡œ ì„¹ì…˜ì„ ë¶„ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

```markdown
# ë©”ì¸ í”„ë¡¬í”„íŠ¸

ê¸°ë³¸ ì§€ì‹œì‚¬í•­...

## Chain-of-Thought

1. ë¨¼ì € ì›ë¬¸ì„ ë¶„ì„í•˜ì„¸ìš”
2. ìš©ì–´ì§‘ì„ í™•ì¸í•˜ì„¸ìš”
3. ë²ˆì—­ì„ ìˆ˜í–‰í•˜ì„¸ìš”

## ì¶œë ¥ í˜•ì‹

JSONìœ¼ë¡œ ì¶œë ¥í•˜ì„¸ìš”.
```

```python
template = loader.load("translator")

# íŠ¹ì • ì„¹ì…˜ ì¶”ì¶œ
cot_section = template.get_section("Chain-of-Thought")
output_section = template.get_section("ì¶œë ¥ í˜•ì‹")

# ëª¨ë“  ì„¹ì…˜ ì¡°íšŒ
sections = template.get_all_sections()
print(sections.keys())  # ["ë©”ì¸ í”„ë¡¬í”„íŠ¸", "Chain-of-Thought", "ì¶œë ¥ í˜•ì‹"]
```

## PromptTemplateLoader (ë¡œë” í´ë˜ìŠ¤)

í”„ë¡¬í”„íŠ¸ íŒŒì¼ì„ ë¡œë“œí•˜ëŠ” ìœ í‹¸ë¦¬í‹°ì…ë‹ˆë‹¤.

```python
from src.prompts import PromptTemplateLoader, get_template_loader

# ì‹±ê¸€í†¤ ì‚¬ìš© (ê¶Œì¥)
loader = get_template_loader()

# ìƒˆ ì¸ìŠ¤í„´ìŠ¤ (ì»¤ìŠ¤í…€ ê²½ë¡œ)
loader = PromptTemplateLoader(prompts_dir="/path/to/prompts")

# í”„ë¡¬í”„íŠ¸ ë¡œë“œ
template = loader.load("translator")  # translator.md ë¡œë“œ

# Skill ë¡œë“œ (skills/ ë””ë ‰í† ë¦¬ì—ì„œ)
skill = loader.load_skill("accuracy-evaluator")  # skills/accuracy-evaluator/SKILL.md

# ì°¸ì¡° íŒŒì¼ í¬í•¨í•˜ì—¬ ë¡œë“œ
full_prompt = loader.load_with_references("translator", include_references=True)

# ì‚¬ìš© ê°€ëŠ¥í•œ í”„ë¡¬í”„íŠ¸ ëª©ë¡
templates = loader.list_templates()
print(templates)  # ["translator", "accuracy_evaluator", ...]
```

## ë³€ìˆ˜ ì¹˜í™˜

Jinja2 ìŠ¤íƒ€ì¼ì˜ `{{ variable }}` ë¬¸ë²•ì„ ì§€ì›í•©ë‹ˆë‹¤:

```markdown
# ë²ˆì—­ í”„ë¡¬í”„íŠ¸

ì›ë¬¸ ({{ source_lang }}): {{ source_text }}
ëŒ€ìƒ ì–¸ì–´: {{ target_lang }}

ìš©ì–´ì§‘:
{{ glossary }}

{{ source_lang }}ì—ì„œ {{ target_lang }}ë¡œ ë²ˆì—­í•˜ì„¸ìš”.
```

```python
prompt = template.render(
    source_lang="í•œêµ­ì–´",
    source_text="ABC í´ë¼ìš°ë“œëŠ” ì„œë¹„ìŠ¤ì…ë‹ˆë‹¤.",
    target_lang="English (US)",
    glossary="ABC í´ë¼ìš°ë“œ â†’ ABC Cloud"
)
```

## í”„ë¡¬í”„íŠ¸ ì‘ì„± ê°€ì´ë“œ

### Chain-of-Thought íŒ¨í„´

í‰ê°€ ì—ì´ì „íŠ¸ëŠ” ë°˜ë“œì‹œ CoT íŒ¨í„´ì„ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤:

```markdown
## í‰ê°€ ì ˆì°¨

ë‹¤ìŒ ë‹¨ê³„ë¥¼ ìˆœì„œëŒ€ë¡œ ìˆ˜í–‰í•˜ì„¸ìš”:

1. **ì˜ë¯¸ ë¶„ì„**: ì›ë¬¸ì˜ í•µì‹¬ ì˜ë¯¸ë¥¼ íŒŒì•…í•©ë‹ˆë‹¤
2. **ë²ˆì—­ ê²€í† **: ë²ˆì—­ì´ ì›ë¬¸ ì˜ë¯¸ë¥¼ ì •í™•íˆ ì „ë‹¬í•˜ëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤
3. **ìš©ì–´ ê²€ì¦**: ìš©ì–´ì§‘ì˜ ìš©ì–´ê°€ ì˜¬ë°”ë¥´ê²Œ ì‚¬ìš©ë˜ì—ˆëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤
4. **ì ìˆ˜ ê²°ì •**: ìœ„ ë¶„ì„ì„ ë°”íƒ•ìœ¼ë¡œ 0-5 ì ìˆ˜ë¥¼ ê²°ì •í•©ë‹ˆë‹¤

ê° ë‹¨ê³„ì˜ ë¶„ì„ ê²°ê³¼ë¥¼ `reasoning_chain`ì— ê¸°ë¡í•˜ì„¸ìš”.
```

### Few-shot ì˜ˆì‹œ í¬í•¨

í‰ê°€ ì¼ê´€ì„±ì„ ìœ„í•´ ì ìˆ˜ë³„ ì˜ˆì‹œë¥¼ í¬í•¨í•©ë‹ˆë‹¤:

```markdown
## ì ìˆ˜ ì˜ˆì‹œ

### 5ì  (ì™„ë²½)
- ì›ë¬¸: "ì„¤ì •ì„ ì €ì¥í•©ë‹ˆë‹¤"
- ë²ˆì—­: "Save settings"
- ì´ìœ : ì˜ë¯¸ ì •í™•, ìì—°ìŠ¤ëŸ¬ìš´ í‘œí˜„

### 3ì  (ê²½ê³„)
- ì›ë¬¸: "ì„¤ì •ì„ ì €ì¥í•©ë‹ˆë‹¤"
- ë²ˆì—­: "Settings are saved"
- ì´ìœ : ìˆ˜ë™íƒœ ì‚¬ìš©ìœ¼ë¡œ í†¤ ë¶ˆì¼ì¹˜

### 1ì  (ì‹¬ê°í•œ ë¬¸ì œ)
- ì›ë¬¸: "ì„¤ì •ì„ ì €ì¥í•©ë‹ˆë‹¤"
- ë²ˆì—­: "Delete settings"
- ì´ìœ : ì˜ë¯¸ê°€ ì •ë°˜ëŒ€ë¡œ ë²ˆì—­ë¨
```

## ìºì‹±

í…œí”Œë¦¿ ë¡œë“œëŠ” `@lru_cache`ë¡œ ìºì‹±ë©ë‹ˆë‹¤:

```python
# ì²« í˜¸ì¶œ: íŒŒì¼ ì½ê¸°
template1 = loader.load("translator")

# ë‘ ë²ˆì§¸ í˜¸ì¶œ: ìºì‹œì—ì„œ ë°˜í™˜ (ë¹ ë¦„)
template2 = loader.load("translator")

# ìºì‹œ í´ë¦¬ì–´ (íŒŒì¼ ìˆ˜ì • í›„)
loader.clear_cache()
```

## Strands Agentì—ì„œ ì‚¬ìš©

```python
from src.prompts import load_prompt
from src.models import TranslationUnit

# TranslationUnitì—ì„œ í”„ë¡¬í”„íŠ¸ ìƒì„±
def create_translator_prompt(unit: TranslationUnit) -> str:
    return load_prompt(
        "translator",
        source_text=unit.source_text,
        target_lang=unit.target_lang,
        glossary=format_glossary(unit.glossary),
        risk_profile=unit.risk_profile
    )

# Strands Agent í˜¸ì¶œ
response = agent.run(prompt=create_translator_prompt(unit))
```

## ì£¼ìš” ë©”ì„œë“œ ìš”ì•½

| í´ë˜ìŠ¤ | ë©”ì„œë“œ | ì„¤ëª… |
|--------|--------|------|
| `PromptTemplate` | `render(**kwargs)` | ë³€ìˆ˜ ì¹˜í™˜ |
| `PromptTemplate` | `get_section(header)` | ì„¹ì…˜ ì¶”ì¶œ |
| `PromptTemplate` | `metadata` | YAML frontmatter |
| `PromptTemplateLoader` | `load(name)` | í”„ë¡¬í”„íŠ¸ ë¡œë“œ |
| `PromptTemplateLoader` | `load_skill(name)` | ìŠ¤í‚¬ ë¡œë“œ |
| `PromptTemplateLoader` | `clear_cache()` | ìºì‹œ í´ë¦¬ì–´ |
| - | `load_prompt(name, **kwargs)` | í¸ì˜ í•¨ìˆ˜ |
| - | `get_template_loader()` | ì‹±ê¸€í†¤ |
